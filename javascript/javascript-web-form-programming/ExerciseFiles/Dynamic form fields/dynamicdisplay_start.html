<!doctype html>
<html>
    <head>
        <title>Dynamic Field Display</title>
        <link rel="stylesheet" href="../styles.css">
        <style>
            label.disabled {
                color: darkgray;
            }

            #toppingitems {
                padding-left: 1.2em;
                padding-top: .5em;
            }

            #searchfield::placeholder {
                color: #333;
            }

            #searchfield {
                box-sizing: content-box;
                font-size: 100%;
                font-family: inherit;
            }

            #searchfield {
                background: #eee;
                border: solid 1px #999;
                border-radius: 3px;

                padding: 4px 5px 4px 5px;
                width: 6em;

                /* TODO: add the transition */

            }

            /* TODO: Add the focus state */
        </style>
    </head>
    <script>
        window.addEventListener("load", e => {
            // Dynamically display a password to the user
            document.getElementById("showpass").addEventListener("change", evt => {
                let passfield = document.getElementById("pass");
                // TODO: change the type attribute to show and hide the password

            });

            // Enable or disable form fields based on another form control
            document.getElementById("showveg").addEventListener("change", evt => {
                // get the container for the checkboxes
                let topelem = document.getElementById("toppingitems");
                // TODO: get the checkboxes that do not correspond to vegetarian
                // and turn them on or off based upon the parent checkbox setting
                let cbquery = "";
                let thecbs = [];
                for (cb of thecbs) {
                    if (document.getElementById("showveg").checked) {
                        cb.setAttribute("disabled", "disabled");
                        cb.parentNode.classList.add("disabled");
                        cb.checked = false;
                    }
                    else {
                        cb.removeAttribute("disabled");
                        cb.parentNode.classList.remove("disabled");
                    }
                }
            });
        });
    </script>
    <body>
        <h1>Dynamic Field Display</h1>
        <p>Use scripting to dynamically enable/disable, show/hide, or manipulate form field types.</p>
        <form action="" autocomplete="off" id="theform">
            <h3>Expanding search field</h3>
            <fieldset>
                <legend>Enter a search term</legend>
                <label for="searchfield">
                    <input type="search" name="searchfield" id="searchfield" placeholder="Search...">
                </label>
            </fieldset>
            <h3>Show / hide a password by changing field type</h3>
            <fieldset>
                <legend>Please log in:</legend>
                <div>
                    <label for="uname">Username:
                        <input type="text" name="uname" id="uname">
                    </label>
                    <label for="pass">Password:
                        <input type="password" name="pass" id="pass">
                    </label>
                    <label for="showpass">
                        <input type="checkbox" name="showpass" id="showpass">Show
                    </label>
                </div>
            </fieldset>
            <h3>Enable and disable elements</h3>
            <fieldset id="toppings">
                <legend>Select your pizza toppings:</legend>
                <div>
                    <label for="showveg">
                        <input type="checkbox" name="showveg" id="showveg">Vegetarian options only
                    </label>
                </div>
                <div id="toppingitems">
                    <div>
                        <label for="pepperoni"><input type="checkbox" name="pprn" id="pepperoni">Pepperoni</label>
                        <label for="sausage"><input type="checkbox" name="ssg" id="sausage">Sausage</label>
                        <label for="meatball"><input type="checkbox" name="mtb" id="meatball">Meatball</label>
                        <label for="ham"><input type="checkbox" name="ham" id="ham">Ham</label>
                    </div>
                    <div>
                        <label for="olives"><input type="checkbox" name="olv" id="olives" data-veg>Olives</label>
                        <label for="onions"><input type="checkbox" name="ons" id="onions" data-veg>Onions</label>
                        <label for="spinach"><input type="checkbox" name="spch" id="spinach" data-veg>Spinach</label>
                        <label for="peppers"><input type="checkbox" name="ppr" id="peppers" data-veg>Peppers</label>
                    </div>
                </div>
            </fieldset>
        </form>
    </body>
</html>